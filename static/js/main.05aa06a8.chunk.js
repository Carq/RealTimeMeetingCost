(this["webpackJsonpmeeting-meter"]=this["webpackJsonpmeeting-meter"]||[]).push([[0],{106:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),i=a(9),c=a.n(i),o=(a(88),a(14)),l=a(13),s=a(16),u=a(17),m=a(18),p=a(147),h=a(143),f=a(108),d=a(110),v=a(140),y=function(t){function e(t){var a;if(Object(o.a)(this,e),(a=Object(s.a)(this,Object(u.a)(e).call(this,t))).renderTime=function(){var t=a.state.timePass,e=a.convertMsToTime(t);return r.a.createElement(f.a,{variant:"h3"},"".concat(e.hours,":").concat(e.minutes,":").concat(e.seconds))},a.renderButtons=function(){return r.a.createElement(v.a,{variant:"contained",color:"primary"},r.a.createElement(d.a,{onClick:a.startWatcher},"Start"),r.a.createElement(d.a,{onClick:a.stopWatcher},"Stop"),r.a.createElement(d.a,{onClick:a.resetWatcher},"Reset"))},a.startWatcher=function(){if(!a.state.isTicking){a.startInterval();var t=new Date;a.RaiseStartDateChange(t),a.setState({isTicking:!0,startDate:t})}},a.stopWatcher=function(){clearInterval(a.watcherInterval),a.setState({isTicking:!1})},a.resetWatcher=function(){var t=new Date;a.RaiseStartDateChange(t),a.setState({startDate:t},a.calculateTimePass)},a.startInterval=function(){a.watcherInterval=setInterval(a.calculateTimePass,100)},a.parseTime=function(t){var e=t.split(":")[0],a=t.split(":")[1],n=new Date;return new Date(n.getFullYear(),n.getMonth(),n.getDate(),e,a)},a.calculateTimePass=function(){var t=a.state.startDate,e=a.props.timeOnChange,n=new Date-t;n=n>0?n:0,e&&e(n),a.setState({timePass:n>0?n:0})},a.convertMsToTime=function(t){return t?{hours:a.formatToTwoCharsNumber(Math.floor(t/36e5%24)),minutes:a.formatToTwoCharsNumber(Math.floor(t/1e3/60%60)),seconds:a.formatToTwoCharsNumber(Math.floor(t/1e3%60))}:{hours:"00",minutes:"00",seconds:"00"}},a.formatToTwoCharsNumber=function(t){return"".concat(t).padStart(2,"0")},t.startTime){var n=a.parseTime(t.startTime);n&&(a.RaiseStartDateChange(n),a.state={startDate:n,isTicking:!0},a.startInterval())}else a.state={};return a}return Object(m.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return r.a.createElement(p.a,{display:"flex",flexDirection:"column"},r.a.createElement(p.a,{m:"auto"},this.renderTime()),r.a.createElement(p.a,{m:"auto"},this.renderButtons()))}},{key:"RaiseStartDateChange",value:function(t){var e=this.props.startDateOnChange;e&&e(t)}}]),e}(n.Component);var g=function(t){return r.a.createElement(p.a,{display:"flex",flexDirection:"column"},r.a.createElement(p.a,{m:"auto"},(e=t,r.a.createElement(f.a,{m:5,variant:"h2"},"\u20ac".concat(function(t){var e=t.timeInMs,a=t.participantsPerHourlyRate,n=0;for(var r in a)n+=(a[r]||0)*(r||0);return(n/36e5*e).toFixed(2)}(e))))));var e},C=a(145),b=function(t){function e(){var t,a;Object(o.a)(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).nameChanged=function(t){var e=a.props,n=e.id,r=e.hourlyRate,i=e.count;a.props.onChange({id:n,name:t.target.value,hourlyRate:r,count:i})},a.hourlyRateChanged=function(t){var e=a.props,n=e.id,r=e.name,i=e.count,c=parseInt(t.target.value)||0;a.props.onChange({id:n,name:r,hourlyRate:c>=0?c:0,count:i})},a.countChanged=function(t){var e=a.props,n=e.id,r=e.name,i=e.hourlyRate,c=parseInt(t.target.value)||0;a.props.onChange({id:n,name:r,hourlyRate:i,count:c>=0?c:0})},a}return Object(m.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this.props,e=t.name,a=t.hourlyRate,n=t.count;return r.a.createElement(p.a,{mx:"auto"},r.a.createElement(C.a,{label:"Participant Name",value:e,onChange:this.nameChanged,style:{margin:"4px",width:"180px"}}),r.a.createElement(C.a,{label:"Hourly Rate (\u20ac)",type:"number",value:a,onChange:this.hourlyRateChanged,style:{margin:"4px",width:"120px"}}),r.a.createElement(C.a,{label:"Count",type:"number",value:n,onChange:this.countChanged,style:{margin:"4px",width:"60px"}}))}}]),e}(n.Component),E=a(142),O=a(65),R=a.n(O),P=a(66),j=a.n(P),T=a(150),k=function(t){function e(){return Object(o.a)(this,e),Object(s.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this.props,e=t.participants,a=t.canRemoveParticipant,n=t.canAddParticipant,i=t.participantOnChange,c=t.onAddParticipant,o=t.onRemoveParticipant;return r.a.createElement(p.a,{display:"flex",flexDirection:"column",justifyContent:"center",m:2},r.a.createElement(p.a,{display:"flex",flexDirection:"column",justifyContent:"center"},e&&e.map((function(t,e){return r.a.createElement(b,{key:e,id:e,name:t.name,hourlyRate:t.hourlyRate,count:t.count,onChange:function(t){return i(t)}})}))),r.a.createElement(p.a,{m:"auto"},r.a.createElement(v.a,null,r.a.createElement(T.a,{title:"Add participant"},r.a.createElement(E.a,{variant:"contained",color:"primary",disabled:!n,onClick:function(){return c&&c()}},r.a.createElement(R.a,null))),r.a.createElement(T.a,{title:"Remove last participant"},r.a.createElement(E.a,{variant:"contained",color:"secondary",disabled:!a,onClick:function(){return o&&o()}},r.a.createElement(j.a,null))))))}}]),e}(n.Component),w=a(68),D=a.n(w),x=a(67),S=a.n(x),I=function(t){function e(){var t,a;Object(o.a)(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).state={link:null},a.generateLink=function(){var t=a.props,e=t.participants,n=t.startDate,r="?";if(n){var i=new Date(n);r+="startTime=".concat(i.getHours(),":").concat(i.getMinutes(),"&")}e&&(r+="participants=".concat(e.map((function(t){return"".concat(t.name||"",",").concat(t.hourlyRate,",").concat(t.count)})))),S()(window.location.origin+"/metting-meter"+r),a.setState({link:r})},a}return Object(m.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this.state.link;return r.a.createElement(p.a,{display:"flex",flexDirection:"row",alignItems:"baseline"},r.a.createElement(d.a,{size:"small",variant:"outlined",onClick:this.generateLink,startIcon:r.a.createElement(D.a,null),color:"primary",style:{marginRight:"4px"}},"Generate Link"),t&&r.a.createElement(f.a,{size:"small",color:"secondary"},"Link has been copied to clipboard."))}}]),e}(n.Component),M=(a(95),function(t){function e(t){var a;Object(o.a)(this,e),(a=Object(s.a)(this,Object(u.a)(e).call(this,t))).participantOnChange=function(t){a.setState((function(e){var n=e.participants.map((function(e,a){return a===t.id?{name:t.name,hourlyRate:t.hourlyRate,count:t.count}:e}));return{participants:n,countPerHourlyRate:a.calculateCountPerHourlyRate(n)}}))},a.calculateCountPerHourlyRate=function(t){var e={};return t&&t.map((function(t){return e[t.hourlyRate]=t.count+(e[t.hourlyRate]||0)})),e},a.addParticipantSlot=function(){var t=a.state.participants;t.push({hourlyRate:0,count:0}),a.setState(t)},a.removeLastParticipantSlot=function(){var t=a.state.participants;t.pop(),a.setState({participants:t,countPerHourlyRate:a.calculateCountPerHourlyRate(t)})},a.parseParticipants=function(t){if(!t)return new Array(3).fill({hourlyRate:0,count:0});for(var e=new Array(3),a=t.split(","),n=0,r=0;r<a.length;r+=3)e[n++]={name:a[r],hourlyRate:parseInt(a[r+1])||0,count:parseInt(a[r+2])||0};return e.fill({hourlyRate:0,count:0},n,3)},a.startDateOnChange=function(t){a.setState({startDate:t})};var n=a.parseParticipants(t.initialParticipants);return a.state={timePassInMs:0,startTime:t.startTime,participants:n,countPerHourlyRate:a.calculateCountPerHourlyRate(n)},a}return Object(m.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this,e=this.state,a=e.participants,n=e.startTime,i=e.startDate,c=e.timePassInMs;return r.a.createElement(h.a,{className:"metting-metter_container effect",maxWidth:"sm"},r.a.createElement(p.a,null,r.a.createElement(p.a,null,r.a.createElement(g,{timeInMs:c,participantsPerHourlyRate:this.state.countPerHourlyRate}),r.a.createElement(y,{startTime:n,startDateOnChange:this.startDateOnChange,timeOnChange:function(e){t.setState({timePassInMs:e})}})),r.a.createElement(k,{participants:a,participantOnChange:this.participantOnChange,onAddParticipant:this.addParticipantSlot,canAddParticipant:a.length<10,canRemoveParticipant:a.length>1,onRemoveParticipant:this.removeLastParticipantSlot}),r.a.createElement(I,{participants:a,startDate:i})))}}]),e}(n.Component)),H=a(144),A=(a(96),function(){return r.a.createElement(p.a,{className:"footer"},r.a.createElement(f.a,{variant:"caption",className:"footer__item"},r.a.createElement(H.a,{color:"textSecondary",href:"https://github.com/Carq/"},"github.com/Carq")),"-",r.a.createElement(f.a,{color:"textSecondary",variant:"caption",className:"footer__item"},'"Lost time is never found again." \u2013 Benjamin Franklin.'))}),N=function(){return r.a.createElement(p.a,{m:1},r.a.createElement(f.a,{variant:"h3",align:"center",color:"primary"},"Meeting Meter"))},W=a(69),L=Object(W.a)(),B=a(39),U={startTime:{type:B.UrlQueryParamTypes.string},participants:{type:B.UrlQueryParamTypes.string}},_=function(t){function e(){return Object(o.a)(this,e),Object(s.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=this;L.listen((function(){return t.forceUpdate()}))}},{key:"render",value:function(){var t=this.props,e=t.startTime,a=t.participants;return r.a.createElement(r.a.Fragment,null,r.a.createElement(N,null),r.a.createElement(M,{startTime:e,initialParticipants:a}),r.a.createElement(A,null))}}]),e}(n.Component),F=Object(B.addUrlProps)({urlPropsQueryConfig:U})(_);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(B.configureUrlQuery)({history:L}),c.a.render(r.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},83:function(t,e,a){t.exports=a(106)},88:function(t,e,a){},95:function(t,e,a){},96:function(t,e,a){}},[[83,1,2]]]);
//# sourceMappingURL=main.05aa06a8.chunk.js.map